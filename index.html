<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8" />

  <title>Routing</title>

  <style type="text/css">
    body:before {
      content: attr(message);
    }
  </style>

</head>

<body>

  <script>
	//example URL https://www.reddit.com/?count=25&after=t3_59wklv
    (function(){
      var redirect = sessionStorage.redirect;
      delete sessionStorage.redirect;
      if (redirect && redirect != location.href) {
        history.replaceState(null, null, redirect);
        //document.body.setAttribute('message', redirect);
        var path = window.location.pathname;
        path = path.replace("/geddit/", "");
        var queryStr = window.location.search;	
        queryStr = queryStr.substring(1);
	    var params = {}, queries, temp, i, l;
	    // Split into key/value pairs
	    queries = queryStr.split("&amp;");
	    // Convert the array of strings into an object
	    for ( i = 0, l = queries.length; i < l; i++ ) {
	        temp = queries[i].split('=');
	        params[temp[0]] = temp[1];
	    }
	    console.log( params );
        document.body.setAttribute('message', path);
      }
      else {
        document.body.setAttribute('message', 'r/all');
      }
    })();
  </script>

</body>


</html>
